(function(){"use strict";var t={4482:function(t,e,a){a.r(e),a.d(e,{default:function(){return u}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("van-nav-bar",{attrs:{title:"注册 / 登录","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),e("van-form",{directives:[{name:"show",rawName:"v-show",value:t.key,expression:"key"}],on:{submit:t.onSubmit}},[e("div",{staticClass:"phone"},[e("van-icon",{attrs:{name:"phone-o"}}),e("van-field",{attrs:{name:"username",placeholder:"请输入手机号",rules:[{required:!0,message:"请输入手机号"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),e("div",{staticClass:"password"},[e("van-icon",{attrs:{name:"eye-o"}}),e("van-field",{attrs:{type:"password",name:"password",placeholder:"请输入密码",rules:[{required:!0,message:"请输入密码"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),e("div",{staticClass:"text",staticStyle:{display:"flex","justify-content":"space-between"}},[e("p",[t._v("还没有注册吗？去 "),e("a",{on:{click:t.change}},[t._v("注册")])]),e("p",{staticStyle:{color:"#c1080b"},on:{click:t.warn}},[t._v("忘记密码？")])]),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",color:"#07c160"}},[t._v("登录 ")])],1)]),e("van-form",{directives:[{name:"show",rawName:"v-show",value:t.key2,expression:"key2"}]},[e("div",{staticClass:"phone"},[e("van-icon",{attrs:{name:"phone-o"}}),e("van-field",{attrs:{name:"username",placeholder:"请输入手机号",rules:[{required:!0,message:"请输入手机号"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),e("div",{staticClass:"password"},[e("van-icon",{attrs:{name:"eye-o"}}),e("van-field",{attrs:{type:"password",name:"password",placeholder:"请输入密码",rules:[{required:!0,message:"请输入密码"}]},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),e("div",{staticClass:"primary"},[e("van-field",{attrs:{center:"",clearable:"",label:"短信验证码",placeholder:"请输入短信验证码"},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-button",{attrs:{size:"small",type:"primary"},on:{click:t.onprimary}},[t._v("发送验证码")])]},proxy:!0}]),model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}})],1),e("div",{staticClass:"text",staticStyle:{display:"flex","justify-content":"space-between"}},[e("p",[t._v("已经有账号了？去 "),e("a",{on:{click:t.change2}},[t._v("登录")])]),e("p",{staticStyle:{color:"#c1080b"},on:{click:t.warn}},[t._v("忘记密码？")])]),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",color:"#07c160"},on:{click:t.enroll}},[t._v("注册 ")])],1)]),e("van-form",{directives:[{name:"show",rawName:"v-show",value:t.warns,expression:"warns"}]},[e("div",{staticClass:"phone"},[e("van-icon",{attrs:{name:"phone-o"}}),e("van-field",{staticStyle:{"align-items":"flex-end"},attrs:{name:"username",placeholder:"请输入手机号",rules:[{required:!0,message:"请输入手机号"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),e("div",{staticClass:"password"},[e("van-icon",{attrs:{name:"eye-o"}}),e("van-field",{attrs:{type:"password",name:"warnpassword",placeholder:"请输入新密码",rules:[{required:!0,message:"请输入新密码"}]},model:{value:t.warnpassword,callback:function(e){t.warnpassword=e},expression:"warnpassword"}})],1),e("div",{staticClass:"primary"},[e("van-field",{attrs:{center:"",clearable:"",label:"短信验证码",placeholder:"请输入短信验证码"},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-button",{attrs:{size:"small",type:"primary"},on:{click:t.onwarns}},[t._v("发送验证码")])]},proxy:!0}]),model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}})],1),e("div",{staticClass:"text",staticStyle:{display:"flex","justify-content":"space-between"}},[e("p",[t._v("已经有账号了？去 "),e("a",{on:{click:t.change2}},[t._v("登录")])]),e("p",{staticStyle:{color:"#c1080b"},on:{click:t.warn}},[t._v("忘记密码？")])]),e("div",{staticStyle:{margin:"16px",display:"flex","justify-content":"space-evenly"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",color:"#07c160"},on:{click:t.onWarp}},[t._v("确定 ")])],1)])],1)},i=[],o=(a(6887),a(8848)),n=(a(7505),a(7061)),r=(a(1049),a(140)),l=(a(7658),a(70)),c=a(4239),d={components:{store:c.Z,[r.Z.name]:r.Z,[n.Z.name]:n.Z,[o.Z.name]:o.Z},data(){return{username:"",password:"",sms:"",key:!0,key2:!1,name:"Login",warns:!1,warnpassword:""}},methods:{onClickLeft(){this.$router.push("/my")},change(){this.key=!1,this.key2=!0,this.warns=!1},change2(){this.key=!0,this.key2=!1,this.warns=!1},onSubmit(){(0,l.ZP)({method:"post",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/user/login",data:{username:this.username,password:this.password}}).then((t=>{if(console.log(t.data),console.log(t.data.msg),"登录成功"==t.data.msg){localStorage.clear();let e={isLogin:!0,uid:t.data.uid,birthday:t.data.userInfo.birthday,avatar:t.data.userInfo.avatar,sex:t.data.userInfo.sex,id:t.data.userInfo._id,nickname:t.data.userInfo.nickname,token:t.data.token,username:t.data.username};window.localStorage.setItem("userInfo",JSON.stringify(e)),this.$store.state.isLogin=e.isLogin,console.log("this.$store.state.isLogin",this.$store.state.isLogin),this.$router.push("/my")}}),(t=>{console.log(t)}))},onprimary(){""==this.username&&(0,o.Z)("手机号不能为空"),(0,l.ZP)({method:"post",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/user/sendSms",data:{mobile:this.username,type:"register"}}).then((t=>{1===t.data.code&&(0,o.Z)(t.data.msg),console.log(t.data),this.sms=t.data.data}))},enroll(){""!=this.sms&&6==this.sms.length||(0,o.Z)("验证码格式错误"),(0,l.ZP)({method:"post",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/user/reg",data:{username:this.username,password:this.password,vercode:this.sms}}).then((t=>{console.log(t.data)})).catch((t=>{console.log(t.data)}))},warn(){this.warns=!0,this.key=!1,this.key2=!1},onWarp(){l.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/user/forget",{username:this.username,password:this.warnpassword,vercode:this.sms}).then((t=>{if(console.log(t.data),50201!=t.data.code)if(50202!=t.data.code){if(0==t.data.code){(0,o.Z)(t.data.msg+"请重新登录"),localStorage.clear();let e={isLogin:!1};window.localStorage.setItem("userInfo",JSON.stringify(e)),this.$store.state.isLogin=e.isLogin,setTimeout((()=>{this.$router.push({path:"/"},(()=>{}),(()=>{}))}),1e3)}}else(0,o.Z)("验证码或密码错误");else(0,o.Z)("手机号未输入或不合法")}))},onwarns(){""==this.username?(0,o.Z)("手机号不能为空"):(0,l.ZP)({method:"post",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/user/sendSms",data:{mobile:this.username,type:"login"}}).then((t=>{console.log(t.data),this.sms=t.data.data}))}},mounted(){}},h=d,p=a(3736),m=(0,p.Z)(h,s,i,!1,null,"31a6f1a0",null),u=m.exports},4702:function(t,e,a){a.r(e),a.d(e,{default:function(){return $}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("van-nav-bar",{attrs:{title:"文章详情","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),e("div",{attrs:{id:"details-content"}},[e("div",{staticClass:"content"},[e("h3",[t._v(t._s(t.title))]),e("div",{staticClass:"user"},[e("div",{staticClass:"userinfo",staticStyle:{display:"flex"}},[e("div",{staticClass:"img",staticStyle:{width:"50px",height:"50px"}},[e("img",{staticStyle:{width:"100%",height:"100%","border-radius":"50%"},attrs:{src:t.avatar,alt:"",srcset:""}})]),e("div",{staticClass:"info"},[e("p",{staticClass:"van-ellipsis",staticStyle:{width:"50vw","text-align":"left"}},[t._v(t._s(t.author))]),e("span",[t._v(t._s(new Date(1666365377288).toLocaleDateString()))])])]),e("div",{staticClass:"infobtn",staticStyle:{"margin-right":"20px"}},[e("button",{directives:[{name:"show",rawName:"v-show",value:t.ishow,expression:"ishow"}],staticClass:"guanzhu",on:{click:t.changeshow}},[t._v("+关注")]),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.ishow,expression:"!ishow"}],staticClass:"guanzhu",on:{click:t.changeshow}},[t._v("已关注")])])])]),e("div",{staticClass:"list",staticStyle:{"border-bottom":"1px solid #eee"}},[e("p",{staticStyle:{"text-align":"left","margin-left":"10px","margin-bottom":"10px","word-wrap":"break-word"}},[t._v(t._s(t.content))]),e("div",{staticClass:"img",staticStyle:{width:"95%",margin:"0 auto","margin-bottom":"10px"}},t._l(t.imageSrc,(function(t){return e("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:t,alt:"内容图片",srcset:""}})})),0)])]),e("comment",{attrs:{comment:t.comment,fav:t.fav,like:t.like,uid:t.uid,imageSrc:t.imageSrc}}),e("detailsFooter",{attrs:{uid:t.uid,item:t.item},on:{render:t.render}})],1)},i=[],o=a(70),n=a(2269),r=a.n(n),l=a(8385),c=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"comments",staticStyle:{"margin-bottom":"70px","margin-top":"10px"}},[e("div",{staticClass:"comment-header"},[e("h3",[t._v("精彩评论 "+t._s(t.comment))]),e("p",[t._v(t._s(t.like)+" 赞 | "+t._s(t.fav)+" 收藏")])]),e("div",{staticClass:"comment-text"},[e("ul",t._l(t.commentlist,(function(a){return e("li",{key:a.id},[e("div",{staticClass:"left"},[e("div",{staticClass:"img"},[e("img",{attrs:{src:a.info.avatar}})]),e("div",{staticClass:"left-title"},[e("p",[t._v(t._s(a.info.nickname))]),e("span",{staticStyle:{width:"200px"}},[t._v(t._s(a.content))]),e("div",{staticClass:"answer-list",staticStyle:{display:"flex","flex-direction":"column"}},[e("span",{staticClass:"answer",staticStyle:{"margin-left":"20px","margin-top":"10px"},on:{click:function(e){return t.changeshow(a)}}},[t._v("回复")]),e("van-icon",{staticStyle:{position:"absolute",left:"140px","margin-top":"12px"},attrs:{name:"arrow-down"},on:{click:function(e){return t.getanswer(a)}}}),e("ul",{directives:[{name:"show",rawName:"v-show",value:t.clickitem._id===a._id,expression:"clickitem._id===item._id"}],staticStyle:{"margin-top":"10px"}},t._l(t.answerlist,(function(a){return e("li",{key:a.id},[e("div",{staticClass:"left"},[e("div",{staticClass:"img"},[e("img",{attrs:{src:a.info.avatar,alt:"",srcset:""}})]),e("div",{staticClass:"left-title"},[e("p",[t._v(t._s(a.info.nickname))]),e("span",[t._v(t._s(a.content))]),e("div",{staticClass:"answer-list",staticStyle:{display:"flex","flex-direction":"column"}},[e("span",{staticClass:"answer",on:{click:function(e){return t.$toast("这里的区域以后再来探索吧")}}},[t._v("回复")])])])]),e("div",{staticClass:"right"},[e("p",[t._v(t._s(a.like_count)+" "),a.is_like?e("van-icon",{staticClass:"icons",attrs:{name:"good-job",color:"#ee0a24"},on:{click:function(e){return t.cancellikeit(a)}}}):e("van-icon",{staticClass:"icons",attrs:{name:"good-job"},on:{click:function(e){return t.likeit(a)}}})],1),e("span",[t._v(t._s(new Date(a.create_time).toLocaleDateString()))])])])})),0)],1)])]),e("div",{staticClass:"right",staticStyle:{position:"absolute",right:"0"}},[e("p",[t._v(t._s(a.like_count)+" "),a.is_like?e("van-icon",{staticClass:"icons",attrs:{name:"good-job",color:"#ee0a24"},on:{click:function(e){return t.cancellikeit(a)}}}):e("van-icon",{staticClass:"icons",attrs:{name:"good-job"},on:{click:function(e){return t.likeit(a)}}})],1),e("span",[t._v(t._s(new Date(a.create_time).toLocaleDateString()))])]),e("van-popup",{style:{height:"30%"},attrs:{position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("van-field",{staticStyle:{"margin-top":"10px"},attrs:{rows:"2",autosize:"",label:"留言",type:"textarea",maxlength:"50",placeholder:"请输入留言","show-word-limit":""},model:{value:t.message,callback:function(e){t.message=e},expression:"message"}}),e("van-button",{staticStyle:{"margin-right":"30px","margin-top":"10px"},attrs:{type:"primary",size:"normal"},on:{click:t.answer}},[t._v("确定")]),e("van-button",{attrs:{type:"primary",size:"normal"},on:{click:function(e){t.show=!1}}},[t._v("取消")])],1)],1)})),0)])])])},d=[],h=(a(6887),a(8848)),p=(a(7505),a(7061)),m=(a(836),a(6811)),u={data(){return{name:"comment",commentlist:"",show:!1,message:"",answerlist:"",clickitem:"",item_id:"",key:""}},components:{[m.Z.name]:m.Z,[p.Z.name]:p.Z},props:["comment","fav","like","uid"],methods:{likeit(t){""===this.uid&&(0,h.Z)("您还未登录"),this.key=t._id,o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/comment_like",{user_id:this.uid,comment_id:t._id}).then((t=>{0===t.data.code&&(this.getcom(),setTimeout((()=>{(0,h.Z)(t.data.msg)}),500))}))},cancellikeit(t){o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/comment_unlike",{user_id:this.uid,comment_id:t._id}).then((t=>{0===t.data.code&&(this.getcom(),setTimeout((()=>{(0,h.Z)(t.data.msg)}),500))}))},getcom(){let t=JSON.parse(localStorage.getItem("userInfo"));null===t||t.isLogin&&(this.$store.state.isLogin=t.isLogin),this.$store.state.isLogin?o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_comment_list",{article_id:this.$route.query.article_id,user_id:this.uid}).then((t=>{console.log(t.data.data),this.commentlist=t.data.data})):this.$store.state.isLogin||o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_comment_list",{article_id:this.$route.query.article_id}).then((t=>{console.log(t.data.data),this.commentlist=t.data.data}))},changeshow(t){this.show=!0,this.item_id=t._id},answer(){""===this.uid&&(0,h.Z)("您还未登录"),o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/add_comment",{user_id:this.uid,article_id:this.$route.query.article_id,content:this.message,reply_comment_id:this.item_id,comment_type:1}).then((t=>{console.log(this.item_id),console.log(t.data),0===t.data.code&&(this.message="",this.show=!1,(0,h.Z)(t.data.msg))}))},getanswer(t){o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_reply_list",{skip:0,limit:10,user_id:this.uid,reply_comment_id:t._id,article_id:this.$route.query.article_id}).then((e=>{console.log(e.data),0==e.data.data.length&&(0,h.Z)("这个人还没有回复哦"),this.answerlist=e.data.data,this.clickitem=t}))}},mounted(){this.getcom(),this.$bus.$on("getcomment",this.getcom)}},v=u,g=a(3736),f=(0,g.Z)(v,c,d,!1,null,"2aacd082",null),b=f.exports,w=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"footer"},[e("div",{staticClass:"input"},[e("van-icon",{staticStyle:{position:"absolute",top:"2.13333vw",left:"2.13333vw"},attrs:{name:"edit"}}),e("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],attrs:{type:"text",placeholder:"写评论..."},domProps:{value:t.value},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add.apply(null,arguments)},input:function(e){e.target.composing||(t.value=e.target.value)}}})],1),e("div",{staticClass:"icon",staticStyle:{position:"relative"}},[e("van-icon",{staticClass:"icons",attrs:{name:"chat-o"},on:{click:t.add}}),t.is_fav?e("van-icon",{staticClass:"icons",attrs:{name:"star",color:"#ee0a24"},on:{click:t.cancelfav}}):e("van-icon",{staticClass:"icons",attrs:{name:"star"},on:{click:t.likefav}}),t.is_like?e("van-icon",{staticClass:"icons",attrs:{name:"good-job",color:"#ee0a24"},on:{click:t.cancellikeit}}):e("van-icon",{staticClass:"icons",attrs:{name:"good-job"},on:{click:t.likeit}}),e("van-icon",{staticClass:"icons",attrs:{name:"share-o"},on:{click:t.onShare}})],1)]),e("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},on:{select:t.onSelect},model:{value:t.showShare,callback:function(e){t.showShare=e},expression:"showShare"}})],1)},_=[],y=(a(9784),a(4898)),k={components:{[y.Z.name]:y.Z},props:["uid","item"],data(){return{is_fav:!1,is_like:!1,value:"",commentlist:"",showShare:!1,dataUrl:"",options:[[{name:"微信",icon:"wechat"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"}],[{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"}]]}},methods:{onSelect({name:t}){this.showShare=!1;let e={"微博":this.shareWeibo,"微信":this.shareWx,QQ:this.shareQq,"复制链接":this.shareLink,"二维码":this.shareWx,"分享海报":this.poster};e[t]()},shareWeibo(){let t="https://service.weibo.com/share/share.php",e=this.item.title+location.href+"#头条#",a=this.item.imageSrc[0]||"@/assets/doge.png";window.open(t+"?title="+encodeURIComponent(e)+"&pic="+encodeURIComponent(a))},shareWx(){l.toDataURL(location.href).then((t=>{console.log(t);let e=new Image;e.src=t;let a=document.createElement("div"),s=document.createElement("div");s.className="share-box",a.className="share-picture";let i=document.createElement("p");i.innerHTML="长按扫描二维码",s.appendChild(a),a.appendChild(e),a.appendChild(i),document.body.appendChild(s),s.addEventListener("click",(function(){this.remove()})),s.addEventListener("wheel",(function(){this.remove()})),s.addEventListener("touchmove",(function(){this.remove()}))}))},shareQq(){console.log(1);let t="https://connect.qq.com/widget/shareqq/index.html",e=this.item.title+"欢迎来到莱头条 #头条#";window.open(t+"?url="+location.href+"&title="+encodeURIComponent(e)+"&pics="+encodeURIComponent(this.item.imageSrc[0])+"&site=莱头条")},shareLink(){this.$copyText(location.href).then((t=>{(0,h.Z)("已成功复制到剪切板")}),(t=>{console.log(t)}))},poster(){this.$emit("render")},likefav(){""===this.uid&&(0,h.Z)("您还未登录"),o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/add_fav",{user_id:this.uid,article_id:this.$route.query.article_id}).then((t=>{0===t.data.code&&((0,h.Z)(t.data.msg),this.is_fav=!0)}))},cancelfav(){o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/remove_fav",{user_id:this.uid,article_id:this.$route.query.article_id}).then((t=>{0===t.data.code&&((0,h.Z)(t.data.msg),this.is_fav=!1)}))},likeit(){""===this.uid&&(0,h.Z)("您还未登录"),o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/like",{user_id:this.uid,article_id:this.$route.query.article_id}).then((t=>{0===t.data.code&&((0,h.Z)(t.data.msg),this.is_like=!0)}))},cancellikeit(){o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/unlike",{user_id:this.uid,article_id:this.$route.query.article_id}).then((t=>{0===t.data.code&&((0,h.Z)(t.data.msg),this.is_like=!1)}))},add(){""===this.uid&&(0,h.Z)("您还未登录"),o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/add_comment",{user_id:this.uid,article_id:this.$route.query.article_id,content:this.value,comment_type:0}).then((t=>{console.log(t.data),0===t.data.code&&(this.$bus.$emit("getcomment",this.commentlist),(0,h.Z)(t.data.msg),this.value="")}))},onShare(){this.showShare=!this.showShare}}},x=k,S=(0,g.Z)(x,w,_,!1,null,"71517dca",null),Z=S.exports,C={data(){return{name:"details",content:"",title:"",imageSrc:"",time:"",author:"",like:"",comment:"",fav:"",avatar:"",ishow:!0,uid:"",item:""}},components:{comment:b,detailsFooter:Z},methods:{onClickLeft(){this.$router.back()},changeshow(){this.ishow=!this.ishow},render(){let t=document.getElementById("details-content");r()(t,{allowTaint:!0,useCORS:!0}).then((function(t){let e=document.createElement("div"),a=document.createElement("div"),s=(t.getContext("2d"),new Image),i=document.createElement("p");i.innerHTML="长按保存图片",s.src=t.toDataURL("image/png"),a.className="share-picture",e.className="share-box",e.appendChild(a),a.appendChild(s),a.appendChild(i),document.body.appendChild(e),e.addEventListener("click",(function(){this.remove()})),e.addEventListener("wheel",(function(){this.remove()})),e.addEventListener("touchmove",(function(){this.remove()}))}))}},created(){let t=JSON.parse(localStorage.getItem("userInfo"));null===t||t.isLogin&&(this.$store.state.isLogin=t.isLogin),console.log(this.$store.state.isLogin),this.$store.state.isLogin?(this.uid=t.uid,o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_article_detail",{article_id:this.$route.query.article_id,user_id:this.uid}).then((t=>{console.log(t.data),this.item=t.data.data,this.content=t.data.data.content,this.title=t.data.data.title,this.imageSrc=t.data.data.imageSrc,this.time=t.data.data.time,this.author=t.data.data.author,this.like=t.data.data.like,this.comment=t.data.data.comment,this.fav=t.data.data.fav,this.avatar=t.data.data.avatar,this.is_fav=t.data.data.is_fav,this.is_like=t.data.data.is_like})).catch((t=>{console.log(t)}))):this.$store.state.isLogin||o.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_article_detail",{article_id:this.$route.query.article_id}).then((t=>{console.log(t.data),this.item=t.data.data,this.content=t.data.data.content,this.title=t.data.data.title,this.imageSrc=t.data.data.imageSrc,this.time=t.data.data.time,this.author=t.data.data.author,this.like=t.data.data.like,this.comment=t.data.data.comment,this.fav=t.data.data.fav,this.avatar=t.data.data.avatar,this.is_fav=t.data.data.is_fav,this.is_like=t.data.data.is_like})).catch((t=>{console.log(t)}))}},P=C,L=(0,g.Z)(P,s,i,!1,null,"6127aa86",null),$=L.exports},2015:function(t,e,a){a.r(e),a.d(e,{default:function(){return _}});var s=function(){var t=this,e=t._self._c;return e("div",[e("van-row",{staticClass:"top",staticStyle:{"background-color":"#07c160"}},[e("van-col",{attrs:{span:"2"}}),e("router-link",{attrs:{to:"/searchs"}},[e("van-col",{staticClass:"search",attrs:{span:"20"}},[e("div",{staticClass:"search-btn"},[e("van-icon",{staticClass:"search-icon",attrs:{name:"search"}}),t._v(" 搜索 ")],1)])],1),e("van-col",{attrs:{span:"2"}})],1),e("div",{staticClass:"home_tabs",staticStyle:{"z-index":"999"}},[e("van-tabs",{attrs:{color:"#07c160"},on:{click:t.getId}},t._l(t.list,(function(a){return e("van-tab",{key:t.list.id,attrs:{title:a.name}})})),1)],1),e("list")],1)},i=[],o=(a(6058),a(5094)),n=(a(1048),a(8186)),r=a(70),l=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"pinfo"},[e("ul",{staticClass:"tableList"},[e("van-pull-refresh",{on:{refresh:t.onRefresh},scopedSlots:t._u([{key:"pulling",fn:function(t){return[e("img",{staticClass:"doge",style:{transform:`scale(${t.distance/80})`},attrs:{src:a(6095)}})]}},{key:"loosing",fn:function(){return[e("img",{staticClass:"doge",attrs:{src:a(6095)}})]},proxy:!0},{key:"loading",fn:function(){return[e("img",{staticClass:"doge",attrs:{src:a(5538)}})]},proxy:!0}]),model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[e("van-list",{staticStyle:{"margin-top":"25px"},attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.centerlist,(function(a){return e("li",{key:a.id,staticStyle:{color:"#000",height:"200px"},on:{click:function(e){return t.todetails(a)}}},[e("div",{staticClass:"top"},[e("p",{staticStyle:{"word-wrap":"break-word"}},[t._v(t._s(a.title))]),e("div",{directives:[{name:"show",rawName:"v-show",value:a.imageSrc.length<3,expression:"item.imageSrc.length<3"}],staticClass:"img",staticStyle:{width:"110px"}},[e("img",{directives:[{name:"show",rawName:"v-show",value:a.imageSrc.length,expression:"item.imageSrc.length"}],staticStyle:{"margin-top":"10px",width:"100%","object-fit":"cover","max-height":"160px"},attrs:{src:a.imageSrc[0]}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:3===a.imageSrc.length,expression:"item.imageSrc.length===3"}],staticClass:"box",staticStyle:{display:"flex",width:"90vw","justify-content":"space-around"}},t._l(a.imageSrc,(function(t){return e("div",{staticClass:"imgs",staticStyle:{margin:"5px",width:"150px"}},[e("img",{key:t.id,staticStyle:{"margin-top":"10px",width:"100%","max-height":"120px","object-fit":"cover"},attrs:{src:t}})])})),0),e("div",{staticClass:"bottom"},[e("span",{staticClass:"van-ellipsis",staticStyle:{flex:"4"}},[t._v(t._s(a.author)+" ")]),e("div",{staticClass:"bottom-right"},[e("span",[t._v(t._s(a.comment)+"评论")]),e("span",[t._v(" 发布于"+t._s(new Date(a.time).toLocaleDateString()))])])])])})),0)],1)],1)])])},c=[],d=(a(5791),a(4269)),h=(a(4408),a(4639)),p=(a(7658),{components:{[h.Z.name]:h.Z,[d.Z.name]:d.Z},data(){return{centerlist:[],list:[],loading:!1,finished:!1,refreshing:!1,skip:0,limit:10}},methods:{onLoad(t){setTimeout((()=>{(0,r.ZP)({method:"post",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_article_list",data:{cate_id:t||"609e99d6935e5b0001eaf4f2",skip:this.skip,limit:this.limit}}).then((t=>{this.centerlist=t.data.data,console.log(this.centerlist),this.refreshing=!1,this.loading=!1,this.skip=this.centerlist.length,this.limit+=10,this.limit>40&&(this.finished=!0)}))}),1e3)},onRefresh(){this.finished=!1,this.loading=!0,this.onLoad()},getData(t){(0,r.ZP)({method:"post",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_article_list",data:{cate_id:t||"609e99d6935e5b0001eaf4f2",skip:0,limit:10}}).then((t=>{this.centerlist=t.data.data}))},todetails(t){this.$router.push({path:"/details",query:{article_id:t._id}})}},mounted(){this.getData(),this.$bus.$on("creatId",this.getData)}}),m=p,u=a(3736),v=(0,u.Z)(m,l,c,!1,null,"03b0950b",null),g=v.exports,f={components:{[n.Z.name]:n.Z,[o.Z.name]:o.Z,list:g},data(){return{value:"",active:0,list:[],name:"Home"}},methods:{getId(t){this.$bus.$emit("creatId",this.list[t]._id)}},created(){r.ZP.get("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_cate_list").then((t=>{console.log(t),this.list=t.data.data}))},mounted(){}},b=f,w=(0,u.Z)(b,s,i,!1,null,"ae10929e",null),_=w.exports},1201:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("van-nav-bar",{attrs:{title:"发布"}})],1),e("div",{staticClass:"from"},[e("van-form",[e("van-field",{attrs:{name:"title",placeholder:"请输入标题",label:"标题",rules:[{required:!0,message:"请输入标题"}]},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),e("van-field",{attrs:{type:"text",name:"content",placeholder:"请输入内容",label:"内容",rules:[{required:!0,message:"请输入内容"}]},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),e("van-field",{attrs:{readonly:"",clickable:"",label:"分类",value:t.value,placeholder:"请选择分类"},on:{click:function(e){t.showPicker=!0}}}),e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}},[e("van-picker",{attrs:{"show-toolbar":"",columns:t.columns},on:{cancel:function(e){t.showPicker=!1},confirm:t.onConfirm}})],1),e("van-field",{staticStyle:{"margin-top":"10px"},attrs:{name:"uploader"},scopedSlots:t._u([{key:"input",fn:function(){return[e("van-uploader",{attrs:{"after-read":t.afterRead,"max-count":3},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}})]},proxy:!0}])}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit",color:"#07c160"},on:{click:t.onSubmit}},[t._v("提交 ")])],1)],1)])},i=[],o=(a(6887),a(8848)),n=(a(836),a(6811)),r=(a(3429),a(7722)),l=(a(3529),a(7291)),c=(a(1049),a(140)),d=(a(7505),a(7061)),h=a(70),p=a(691),m={data(){return{name:"publish",title:"",text:"",content:"",uid:"",username:"",value:"",showPicker:!1,columns:["游戏专区","婚恋交友","招聘求职","装修装饰","明日头条","今日头条","劳力市场"],token:"",key:[],fileList:[],cate_id:"",show:!1,type:""}},components:{[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[n.Z.name]:n.Z},methods:{afterRead(t){h.ZP.get("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/upload/token").then((e=>{this.token=e.data.token;let a=t.file.type.split("/")[1],s=new FormData;s.append("key",(0,p.x0)()+"."+a),s.append("token",this.token),s.append("file",t.file),h.ZP.post("https://upload-z1.qiniup.com",s).then((t=>{console.log(t.data),this.key=t.data.key,console.log(this.key)})).catch((t=>{console.log(t)}))}))},onSubmit(){if(this.value&&h.ZP.get("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_cate_list").then((t=>{let e=t.data.data.find((t=>t.name===this.value));this.cate_id=e._id})),""==this.title)return void(0,o.Z)("标题不能为空");if(""==this.content)return void(0,o.Z)("内容不能为空");if(""==this.value)return void(0,o.Z)("分类不能为空");if(""==this.fileList)return void(0,o.Z)("图片不能为空");let t=setInterval((()=>{this.show=!0,(0,o.Z)("发布中..."),this.key&&h.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/add_article",{title:this.title,content:this.content,cate_id:this.cate_id,cate_name:this.value,author:this.username,author_id:this.uid,imageSrc:[`http://toutiao.longxiaokj.com/${this.key}`]}).then((e=>{clearInterval(t),this.show=!1,console.log(e.data),20011===e.data.code&&(0,o.Z)(e.data.msg),0===e.data.code&&setTimeout((()=>{(0,o.Z)("发布成功"),this.title="",this.content="",this.cate_id="",this.value="",this.username="",this.uid="",this.fileList=[]}),500)})).catch((t=>{(0,o.Z)(t)}))}),200)},onConfirm(t){this.value=t,this.showPicker=!1}},mounted(){let t=JSON.parse(localStorage.getItem("userInfo"));console.log(t),this.uid=t.uid,this.username=t.username}},u=m,v=a(3736),g=(0,v.Z)(u,s,i,!1,null,"8e69f536",null),f=g.exports},6102:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app"},[e("form",{attrs:{action:"/"}},[e("van-search",{attrs:{"show-action":"",placeholder:"请输入搜索关键词"},on:{search:t.searchkey,input:t.onSearch,cancel:t.goback},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),0===t.searchlist.length?e("div",{staticClass:"onsearchbox"},[e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.list.length,expression:"list.length===0"}],staticClass:"nav"},[t._m(0),e("div",{staticClass:"nav-right",on:{click:t.del}},[t._m(1),e("van-icon",{attrs:{name:"delete-o"}})],1)]),e("div",{directives:[{name:"show",rawName:"v-show",value:0===t.list.length,expression:"list.length===0"}],staticClass:"nav-list",staticStyle:{"background-color":"#fff"}},[e("ul",t._l(t.search_history,(function(a,s){return t.search_history.length>0?e("li",{key:t.search_history.id},[e("div",{staticClass:"nav-box",staticStyle:{display:"flex","align-items":"center"}},[e("p",{on:{click:function(e){return t.todetails(a)}}},[t._v(t._s(a.title))]),e("van-icon",{staticStyle:{"text-align":"center","margin-left":"10px"},attrs:{name:"cross"},on:{click:function(e){return t.cancel(s)}}})],1)]):t._e()})),0)]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.list.length>0,expression:"list.length>0"}],staticClass:"list"},[e("ul",t._l(t.list,(function(a){return e("li",{key:a.id},[e("p",{staticStyle:{"word-wrap":"break-word","text-align":"left"},on:{click:function(e){return t.todetails(a)}}},[t._v(" "+t._s(a.title)+" ")])])})),0)])]):e("div",{staticClass:"searchlist",staticStyle:{"background-color":"#fff"}},[e("ul",t._l(t.searchlist,(function(a){return e("li",{key:a.id,staticStyle:{color:"#000"},on:{click:function(e){return t.todetails(a)}}},[e("div",{staticClass:"top"},[e("p",{staticStyle:{"word-wrap":"break-word"}},[t._v(t._s(a.title))]),e("div",{directives:[{name:"show",rawName:"v-show",value:a.imageSrc.length<3,expression:"item.imageSrc.length<3"}],staticClass:"img",staticStyle:{width:"110px",height:"100px"}},[e("img",{directives:[{name:"show",rawName:"v-show",value:a.imageSrc.length,expression:"item.imageSrc.length"}],staticStyle:{"margin-top":"10px",width:"100%",height:"100%","object-fit":"cover"},attrs:{src:a.imageSrc[0]}})])]),e("div",{directives:[{name:"show",rawName:"v-show",value:3===a.imageSrc.length,expression:"item.imageSrc.length===3"}],staticClass:"box",staticStyle:{display:"flex",width:"90vw","justify-content":"space-around"}},t._l(a.imageSrc,(function(t){return e("div",{staticClass:"imgs",staticStyle:{margin:"5px",width:"150px",height:"80px"}},[e("img",{key:t.id,staticStyle:{"margin-top":"10px",width:"100%",height:"100%","object-fit":"cover"},attrs:{src:t}})])})),0),e("div",{staticClass:"bottom"},[e("span",{staticClass:"van-ellipsis",staticStyle:{flex:"4"}},[t._v(t._s(a.author)+" ")]),e("div",{staticClass:"bottom-right"},[e("span",[t._v(t._s(a.comment)+"评论")]),e("span",[t._v(" 发布于"+t._s(new Date(a.time).toLocaleDateString()))])])])])})),0)])])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav-left",staticStyle:{"margin-left":"10px"}},[e("p",[t._v("搜索历史")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav-text"},[e("p",[t._v("全部删除")])])}],o=(a(6887),a(8848)),n=(a(541),a(7658),a(70)),r={components:{[o.Z.name]:o.Z},data(){return{name:"searchs",value:"",list:[],records:"",search_history:[],searchlist:[]}},created(){let t=localStorage.getItem("search_history");t&&(this.search_history=JSON.parse(t))},methods:{onSearch(t){n.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/search",{key_word:t,skip:0,limit:10}).then((t=>{0===t.data.code&&(this.list=t.data.data),20030===t.data.code&&(this.list=[]),0===t.data.count&&(0,o.Z)("未搜索到相关内容")}))},searchkey(t){n.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/search",{key_word:t,skip:0,limit:10}).then((t=>{console.log(t.data),0===t.data.code&&(this.searchlist=t.data.data,this.list=[],this.value=""),20030===t.data.code&&(this.searchlist=[]),0===t.data.count&&(0,o.Z)("未搜索到相关内容")}))},todetails(t){let e=this.search_history.findIndex((e=>e.title===t.title));e>=0&&this.search_history.splice(e,1),this.search_history.unshift({title:t.title,timestamp:+new Date,_id:t._id}),localStorage.setItem("search_history",JSON.stringify(this.search_history)),this.$router.push({path:"/details",query:{article_id:t._id}})},del(){this.search_history=[],localStorage.removeItem("search_history")},cancel(t){this.search_history.splice(t,1),localStorage.setItem("search_history",JSON.stringify(this.search_history))},goback(){""==this.searchlist&&this.$router.push("/"),this.searchlist!=[]&&(this.searchlist=[])}}},l=r,c=a(3736),d=(0,c.Z)(l,s,i,!1,null,"3a3c3352",null),h=d.exports},3228:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("van-nav-bar",{attrs:{title:"我的收藏","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),e("div",{staticClass:"lists",staticStyle:{"margin-top":"50px"}},[e("ul",t._l(t.list,(function(a){return e("li",{key:a.id,staticStyle:{color:"#000"}},[e("div",{staticClass:"top",on:{click:function(e){return t.todetails(a)}}},[e("p",{staticStyle:{"overflow-wrap":"break-word",width:"30vw"}},[t._v(t._s(a.title))]),e("div",{staticClass:"img"},[e("img",{directives:[{name:"show",rawName:"v-show",value:a.imageSrc.length,expression:"item.imageSrc.length"}],staticStyle:{"margin-top":"10px",width:"100%",height:"100%","object-fit":"cover"},attrs:{src:a.imageSrc[0]}})])]),e("div",{staticClass:"bottom"},[e("span",{staticClass:"van-ellipsis",staticStyle:{"margin-left":"10px",flex:"4","margin-right":"10px","text-align":"left"}},[t._v(t._s(a.author)+" ")]),e("div",{staticClass:"bottom-right"},[e("span",[t._v(t._s(a.comment)+"评论")]),e("span",[t._v(" 发布于"+t._s(new Date(a.time).toLocaleDateString()))]),e("van-icon",{staticStyle:{"margin-left":"40px","margin-right":"10px"},attrs:{name:"cross"},on:{click:function(e){return t.dellimit(a)}}})],1)])])})),0)])])},i=[],o=(a(6887),a(8848)),n=(a(7658),a(70)),r={data(){return{name:"fav",uid:"",list:""}},methods:{onClickLeft(){this.$router.back()},dellimit(t){n.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/remove_fav",{user_id:this.uid,article_id:t._id}).then((t=>{0===t.data.code&&(this.list="",n.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_fav_list",{user_id:this.uid,skip:0,limit:10}).then((t=>{this.list=t.data.data,(0,o.Z)("取消收藏成功")})))}))},todetails(t){this.$router.push({path:"/details",query:{article_id:t._id}})}},created(){let t=JSON.parse(localStorage.getItem("userInfo"));this.uid=t.uid,n.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_fav_list",{user_id:this.uid,skip:0,limit:10}).then((t=>{console.log(t.data),this.list=t.data.data,30021===t.data.code&&(0,o.Z)(t.data.msg)}))}},l=r,c=a(3736),d=(0,c.Z)(l,s,i,!1,null,"a89651a4",null),h=d.exports},9193:function(t,e,a){a.r(e),a.d(e,{default:function(){return d}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("van-nav-bar",{attrs:{title:"浏览历史","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),e("div",{staticClass:"lists",staticStyle:{"margin-top":"50px"}},[e("ul",t._l(Array.prototype.reverse.call(t.list),(function(a){return e("li",{key:a.id,staticStyle:{color:"#000"},on:{click:function(e){return t.todetails(a)}}},[e("div",{staticClass:"top"},[e("p",{staticStyle:{"word-wrap":"break-word",width:"30vw"}},[t._v(t._s(a.title))]),e("div",{staticClass:"img",staticStyle:{width:"110px",height:"100px"}},[e("img",{directives:[{name:"show",rawName:"v-show",value:a.imageSrc.length,expression:"item.imageSrc.length"}],staticStyle:{"margin-top":"10px",width:"100%",height:"100%","object-fit":"cover"},attrs:{src:a.imageSrc[0]}})])]),e("div",{staticClass:"bottom"},[e("span",{staticClass:"van-ellipsis",staticStyle:{"margin-left":"10px"}},[t._v(t._s(a.author)+" ")]),e("div",{staticClass:"bottom-right",staticStyle:{"margin-right":"10px"}},[e("span",[t._v(t._s(a.comment)+"评论")]),e("span",[t._v(" 发布于"+t._s(new Date(a.time).toLocaleDateString()))])])])])})),0)])])},i=[],o=(a(7658),a(70)),n={data(){return{name:"historylist",uid:"",list:""}},methods:{onClickLeft(){this.$router.back()},todetails(t){this.$router.push({path:"/details",query:{article_id:t._id}})}},created(){let t=JSON.parse(localStorage.getItem("userInfo"));this.uid=t.uid,o.ZP.get(`https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_history_list?uid=${this.uid}&skip&limit`).then((t=>{console.log(t.data),this.list=t.data.data}))}},r=n,l=a(3736),c=(0,l.Z)(r,s,i,!1,null,"6691ebd5",null),d=c.exports},8748:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app"},[e("div",{staticClass:"header"},[t.isshow?e("div",{staticClass:"top"},[e("div",{staticClass:"top-left"},[e("p",{directives:[{name:"show",rawName:"v-show",value:""==t.avatar,expression:"avatar==''"}],staticClass:"avatar"},[e("van-icon",{attrs:{name:"warning-o"}})],1),e("div",{staticStyle:{width:"50px",height:"50px"}},[e("img",{staticStyle:{width:"100%",height:"100%","border-radius":"50%"},attrs:{src:t.avatar,alt:"",srcset:""}})]),e("p"),e("p",{staticStyle:{"margin-left":"20px"}},[t._v(t._s(t.uname))])]),e("div",{staticClass:"top-right"},[e("router-link",{attrs:{to:"/user"}},[e("button",[t._v(" 编辑资料 ")])])],1)]):e("div",{staticClass:"tops",staticStyle:{"padding-bottom":"20px","margin-bottom":"30px"}},[e("p",{staticStyle:{"margin-bottom":"10px","padding-top":"40px"}},[t._v("登录显示更多精彩")]),e("van-button",{attrs:{color:"#b91114",round:"",to:"/login"}},[t._v("登录后更懂你")])],1),e("div",{staticClass:"top-bottom"},[e("router-link",{attrs:{to:"/mylimit"}},[e("div",{staticClass:"bottom-left"},[e("p",[t._v(t._s(t.publish_num))]),e("p",[t._v("头条")])])]),e("div",{staticClass:"bottom-right"},[e("p",[t._v(t._s(t.liked_num))]),e("p",[t._v("获赞")])])],1)]),e("div",{staticClass:"nav"},[e("van-grid",{attrs:{clickable:"","column-num":2}},[e("van-grid-item",{attrs:{icon:"star-o",text:"收藏",to:"/fav"}}),e("van-grid-item",{attrs:{icon:"clock-o",text:"历史",to:"/historylist"}})],1)],1),e("div",{staticClass:"list"},[e("van-cell",{attrs:{"is-link":""},on:{click:t.showPopup}},[t._v("修改密码")]),e("van-popup",{model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("van-form",{on:{submit:t.onSubmit}},[e("van-field",{attrs:{type:"password",name:"oldPassword",placeholder:"请填写旧密码",rules:[{required:!0,message:"请填写旧密码"}]},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}}),e("van-field",{attrs:{type:"password",name:"newPassword",placeholder:"请填写新密码",rules:[{required:!0,message:"请填写新密码"}]},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{staticStyle:{color:"#fff"},attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v("提交")])],1)],1)],1),e("van-cell",{attrs:{"is-link":""},on:{click:t.warPopup}},[t._v("忘记密码")]),e("van-popup",{staticStyle:{width:"100%",height:"50%"},model:{value:t.warshow,callback:function(e){t.warshow=e},expression:"warshow"}},[e("div",{staticClass:"warnpass",staticStyle:{"margin-top":"20px"}},[e("van-form",[e("div",{staticClass:"phone"},[e("van-icon",{attrs:{name:"phone-o"}}),e("van-field",{staticStyle:{"align-items":"flex-end"},attrs:{name:"username",placeholder:"请输入手机号",rules:[{required:!0,message:"请输入手机号"}]},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),e("div",{staticClass:"password"},[e("van-icon",{attrs:{name:"eye-o"}}),e("van-field",{attrs:{type:"password",name:"warnpassword",placeholder:"请输入新密码",rules:[{required:!0,message:"请输入新密码"}]},model:{value:t.warnpassword,callback:function(e){t.warnpassword=e},expression:"warnpassword"}})],1),e("div",{staticClass:"primary"},[e("van-field",{attrs:{center:"",clearable:"",label:"短信验证码",placeholder:"请输入短信验证码"},scopedSlots:t._u([{key:"button",fn:function(){return[e("van-button",{attrs:{size:"small",type:"primary"},on:{click:t.onprimary}},[t._v("发送验证码")])]},proxy:!0}]),model:{value:t.sms,callback:function(e){t.sms=e},expression:"sms"}})],1),e("div",{staticStyle:{margin:"16px",display:"flex","justify-content":"space-evenly"}},[e("van-button",{attrs:{small:"",type:"info","native-type":"submit",color:"#07c160"},on:{click:t.onWarp}},[t._v("确定 ")]),e("van-button",{attrs:{small:"",type:"info","native-type":"submit",color:"#07c160"},on:{click:function(e){t.warshow=!1}}},[t._v(" 取消 ")])],1)])],1)]),e("van-cell",{attrs:{"is-link":""}},[t._v("关于我们")])],1),e("div",{staticClass:"quit"},[e("van-button",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],attrs:{type:"primary",block:"",color:"#fff"},on:{click:t.logout}},[t._v("退出登录 ")])],1)])},i=[],o=(a(6887),a(8848)),n=(a(7505),a(7061)),r=(a(1049),a(140)),l=(a(990),a(4159)),c=(a(1042),a(7165)),d=(a(4824),a(9864)),h=(a(836),a(6811)),p=(a(7658),a(70)),m={components:{[h.Z.name]:h.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[n.Z.name]:n.Z},data(){return{name:"my",show:!1,isshow:!1,warshow:!1,username:"",password:"",uname:"",token:"",oldPassword:"",newPassword:"",uid:"",avatar:"",sms:"",warnpassword:"",publish_num:"",liked_num:""}},methods:{showPopup(){let t=JSON.parse(localStorage.getItem("userInfo"));t.isLogin?this.show=!0:setTimeout((()=>{(0,o.Z)("您还未登录")}),100)},warPopup(){let t=JSON.parse(localStorage.getItem("userInfo"));t.isLogin?this.warshow=!0:setTimeout((()=>{(0,o.Z)("您还未登录")}),100)},onSubmit(){""===this.oldPassword||""===this.newPassword?(0,o.Z)("请输入密码"):p.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/user/updatePwd",{oldPassword:this.oldPassword,newPassword:this.newPassword,uid:this.uid}).then((t=>{console.log(t.data),(0,o.Z)(t.data.msg),localStorage.clear();let e={isLogin:!1};window.localStorage.setItem("userInfo",JSON.stringify(e)),this.$store.state.isLogin=e.isLogin,setTimeout((()=>{this.$router.push({path:"/"},(()=>{}),(()=>{})),(0,o.Z)("请重新登录")}),1e3)}))},onWarp(){p.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/user/forget",{username:this.username,password:this.warnpassword,vercode:this.sms}).then((t=>{if(console.log(t.data),50201!=t.data.code)if(50202!=t.data.code){if(0==t.data.code){(0,o.Z)(t.data.msg+"请重新登录"),localStorage.clear();let e={isLogin:!1};window.localStorage.setItem("userInfo",JSON.stringify(e)),this.$store.state.isLogin=e.isLogin,setTimeout((()=>{this.$router.push({path:"/"},(()=>{}),(()=>{}))}),1e3)}}else(0,o.Z)("验证码或密码错误");else(0,o.Z)("手机号未输入或不合法")}))},onprimary(){""==this.username?(0,o.Z)("手机号不能为空"):(0,p.ZP)({method:"post",url:"https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/user/sendSms",data:{mobile:this.username,type:"login"}}).then((t=>{console.log(t.data),this.sms=t.data.data}))},logout(){localStorage.clear(),console.log(window.localStorage);let t={isLogin:!1};window.localStorage.setItem("userInfo",JSON.stringify(t)),this.$store.state.isLogin=t.isLogin,setTimeout((()=>{this.$router.push({path:"/"},(()=>{}),(()=>{}))}),1e3)}},created(){let t=JSON.parse(localStorage.getItem("userInfo"));null!==t&&(t.isLogin&&(this.isshow=!1),t.isLogin&&(this.isshow=!0,this.uname=t.nickname,this.token=t.token,this.uid=t.uid,this.avatar=t.avatar,p.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/user/getuserInfo",{token:this.token}).then((t=>{console.log(t.data),this.publish_num=t.data.publish_num,this.liked_num=t.data.liked_num}))))}},u=m,v=a(3736),g=(0,v.Z)(u,s,i,!1,null,"f940e76e",null),f=g.exports},7214:function(t,e,a){a.r(e),a.d(e,{default:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("van-nav-bar",{attrs:{title:"我的发布","left-arrow":""},on:{"click-left":t.onClickLeft}})],1),e("div",{staticClass:"lists",staticStyle:{"margin-top":"50px"}},[e("ul",t._l(t.list,(function(a){return e("li",{key:a.id,staticStyle:{color:"#000"}},[e("div",{staticClass:"top",on:{click:function(e){return t.todetails(a)}}},[e("p",{staticStyle:{"word-wrap":"break-word"}},[t._v(t._s(a.title))]),e("div",{staticClass:"img",staticStyle:{width:"110px",height:"100px"}},[e("img",{directives:[{name:"show",rawName:"v-show",value:a.imageSrc.length,expression:"item.imageSrc.length"}],staticStyle:{"margin-top":"10px",width:"100%",height:"100%","object-fit":"cover"},attrs:{src:a.imageSrc[0]}})])]),e("div",{staticClass:"bottom"},[e("span",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(a.author)+" ")]),e("div",{staticClass:"bottom-right"},[e("span",[t._v(t._s(a.comment)+"评论")]),e("span",[t._v(" 发布于"+t._s(new Date(a.time).toLocaleDateString()))]),e("van-icon",{staticStyle:{"margin-left":"40px","margin-right":"10px"},attrs:{name:"cross"},on:{click:function(e){return t.dellimit(a)}}})],1)])])})),0)])])},i=[],o=(a(6887),a(8848)),n=(a(7658),a(70)),r={data(){return{name:"mylimit",list:"",uid:""}},methods:{onClickLeft(){this.$router.push("/my")},dellimit(t){n.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/del_user_article",{_id:t._id,uid:this.uid}).then((t=>{console.log(t.data),"删除成功"==t.data.msg&&(this.list="",n.ZP.get(`https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_user_article_list?uid=${this.uid}&skip&limit`).then((t=>{console.log(t.data),this.list=t.data.data,(0,o.Z)("删除"+t.data.msg)})))}))},todetails(t){this.$router.push({path:"/details",query:{article_id:t._id}})}},created(){let t=JSON.parse(localStorage.getItem("userInfo"));this.uid=t.uid,t.isLogin||(0,o.Z)("请先登录"),n.ZP.get(`https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/api/get_user_article_list?uid=${t.uid}&skip&limit`).then((t=>{console.log(t.data),this.list=t.data.data}))}},l=r,c=a(3736),d=(0,c.Z)(l,s,i,!1,null,"8225203e",null),h=d.exports},2199:function(t,e,a){a.r(e),a.d(e,{default:function(){return b}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"app"},[e("div",[e("van-nav-bar",{attrs:{title:"个人信息","left-arrow":""},on:{"click-left":t.retop}})],1),e("div",{staticClass:"list"},[e("div",{staticClass:"avatar"},[e("van-cell",{staticStyle:{"line-height":"50px"},attrs:{"is-link":""},on:{click:t.photoshowPopup}},[t._v("头像 "),e("img",{attrs:{src:t.avatar,alt:"",srcset:""}})])],1),e("van-popup",{model:{value:t.photoshow,callback:function(e){t.photoshow=e},expression:"photoshow"}},[e("van-uploader",{attrs:{"max-count":1,"after-read":t.afterRead},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}}),e("h6",[t._v("点击选择图片")]),e("van-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getphoto}},[t._v("确定")]),e("van-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.photoshow=!1}}},[t._v("取消")])],1),e("van-cell",{attrs:{title:"昵称","is-link":"",value:t.oldname},on:{click:t.usernameshowPopup}}),e("van-popup",{staticStyle:{width:"300px"},model:{value:t.usernameshow,callback:function(e){t.usernameshow=e},expression:"usernameshow"}},[e("van-field",{attrs:{label:"用户名",placeholder:"请输入新的用户名"},model:{value:t.newname,callback:function(e){t.newname=e},expression:"newname"}}),e("van-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getname}},[t._v("确定")]),e("van-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.usernameshow=!1}}},[t._v("取消")])],1),e("van-cell",{attrs:{title:"性别","is-link":"",value:t.sex},on:{click:t.sexshowPopup}}),e("van-popup",{model:{value:t.sexshow,callback:function(e){t.sexshow=e},expression:"sexshow"}},[e("van-radio-group",{staticStyle:{"margin-top":"40px","margin-left":"50px"},attrs:{direction:"horizontal"},model:{value:t.newsex,callback:function(e){t.newsex=e},expression:"newsex"}},[e("van-radio",{attrs:{name:"男"}},[t._v("男")]),e("van-radio",{attrs:{name:"女"}},[t._v("女")])],1),e("van-button",{attrs:{type:"primary",size:"mini"},on:{click:t.getsex}},[t._v("确定")]),e("van-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.sexshow=!1}}},[t._v("取消")])],1),e("van-cell",{attrs:{title:"生日","is-link":"",value:t.birthday},on:{click:t.birthdayshowPopup}}),e("van-popup",{staticStyle:{width:"300px",height:"300px"},model:{value:t.birthdayshow,callback:function(e){t.birthdayshow=e},expression:"birthdayshow"}},[e("van-datetime-picker",{attrs:{type:"date",title:"选择年月日","min-date":t.minDate,"max-date":t.maxDate},on:{confirm:t.confirm,cancel:t.cancel},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1)],1),e("van-button",{staticStyle:{width:"80%"},attrs:{type:"primary",size:"large"},on:{click:t.changeUser}},[t._v("保存")])],1)},i=[],o=(a(6887),a(8848)),n=(a(1110),a(2979)),r=(a(2425),a(6338)),l=(a(7505),a(7061)),c=(a(3529),a(7291)),d=(a(109),a(6142)),h=(a(836),a(6811)),p=(a(7658),a(70)),m=a(691),u={data(){return{name:"user",photoshow:!1,usernameshow:!1,sexshow:!1,birthdayshow:!1,fileList:[],uid:"",oldname:"",newname:"",sex:"",birthday:"",newsex:"",minDate:new Date(1980,0,1),maxDate:new Date(2023,10,1),currentDate:"",avatar:"",key:""}},components:{[h.Z.name]:h.Z,[d.Z.name]:d.Z,[c.Z.name]:c.Z,[l.Z.name]:l.Z,[r.Z.name]:r.Z,[n.Z.name]:n.Z},methods:{retop(){this.$router.go(-1)},photoshowPopup(){this.photoshow=!0},usernameshowPopup(){this.usernameshow=!0},sexshowPopup(){this.sexshow=!0},birthdayshowPopup(){this.birthdayshow=!0},getname(){this.oldname=this.newname,this.usernameshow=!1},getsex(){this.sex=this.newsex,this.sexshow=!1},confirm(t){this.birthday=t.toLocaleDateString(),this.birthdayshow=!1},cancel(){this.birthdayshow=!1},getphoto(){this.avatar=`http://toutiao.longxiaokj.com/${this.key}`,this.photoshow=!1},afterRead(t){p.ZP.get("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/upload/token").then((e=>{let a=new FormData;a.append("key",(0,m.x0)()),a.append("token",e.data.token),a.append("file",t.file),p.ZP.post("https://upload-z1.qiniup.com",a).then((t=>{this.key=t.data.key})).catch((t=>{console.log(t)}))}))},changeUser(){p.ZP.post("https://d33a5037-6c63-4e92-8bb1-30018ab701ea.bspapp.com/http/user/editUserInfo",{uid:this.uid,avatar:this.avatar,nickname:this.oldname,birthday:this.birthday,sex:this.sex}).then((t=>{if(console.log(t.data),30011===t.data.code&&setTimeout((()=>{(0,o.Z)("您或许没有更改任何信息")}),200),"更新成功"===t.data.msg){(0,o.Z)(t.data.msg),localStorage.clear();let e={isLogin:!1};window.localStorage.setItem("userInfo",JSON.stringify(e)),this.$store.state.isLogin=e.isLogin,setTimeout((()=>{this.$router.push({path:"/my"},(()=>{}),(()=>{})),(0,o.Z)("请重新登录")}),1e3)}})).catch((t=>{console.log(t)}))}},mounted(){let t=JSON.parse(localStorage.getItem("userInfo"));this.uid=t.uid,this.oldname=t.nickname,this.sex=t.sex,this.birthday=t.birthday,this.avatar=t.avatar}},v=u,g=a(3736),f=(0,g.Z)(v,s,i,!1,null,"3080ccd3",null),b=f.exports},2027:function(t,e,a){a(8210);var s=a(4319),i=(a(3688),a(4398)),o=(a(1224),a(6790)),n=(a(5180),a(797)),r=(a(7322),a(6631)),l=(a(9576),a(5947)),c=(a(5825),a(9858)),d=(a(1460),a(2628)),h=(a(5272),a(1765)),p=(a(7672),a(3481)),m=a(6369),u=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view"),t.mainPage?e("van-tabbar",{attrs:{"active-color":"#ee0a24",route:""},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[e("van-tabbar-item",{attrs:{replace:"",to:"/",icon:"home-o"}},[t._v("首页")]),e("van-tabbar-item",{attrs:{replace:"",icon:"add-o"},on:{click:t.onof}},[t._v("发布")]),e("van-tabbar-item",{attrs:{replace:"",icon:"manager-o",to:"/my"}},[t._v("我的")])],1):t._e()],1)},v=[],g=(a(7658),a(2015)),f={data(){return{active:0,value:1}},components:{home:g["default"]},computed:{mainPage(){return this.$route.meta.root}},methods:{onof(){let t=JSON.parse(localStorage.getItem("userInfo"));null===t||t.isLogin&&(this.$store.state.isLogin=t.isLogin),this.$store.state.isLogin?this.$router.push("/publish"):this.$router.push("/login")}}},b=f,w=a(3736),_=(0,w.Z)(b,u,v,!1,null,null,null),y=_.exports,k=a(2631),x=a(4482),S=a(1201),Z=a(8748),C=a(2199),P=a(6102),L=a(4702),$=a(7214),I=a(3228),N=a(9193);m.ZP.use(k.ZP);const q=[{path:"/",name:"Home",component:g["default"],meta:{root:!0},component:()=>Promise.resolve().then(a.bind(a,2015))},{path:"/Login",name:"Login",component:x["default"],meta:{},component:()=>Promise.resolve().then(a.bind(a,4482))},{path:"/publish",name:"publish",component:S["default"],meta:{root:!0,isLogin:!0},component:()=>Promise.resolve().then(a.bind(a,1201))},{path:"/my",name:"my",component:Z["default"],meta:{root:!0,isLogin:!0},component:()=>Promise.resolve().then(a.bind(a,8748))},{path:"/user",name:"user",component:C["default"],meta:{isLogin:!1},component:()=>Promise.resolve().then(a.bind(a,2199))},{path:"/searchs",name:"searchs",component:P["default"],meta:{isLogin:!1},component:()=>Promise.resolve().then(a.bind(a,6102))},{path:"/details",name:"details",component:L["default"],meta:{isLogin:!1},component:()=>Promise.resolve().then(a.bind(a,4702))},{path:"/mylimit",name:"mylimit",component:$["default"],meta:{isLogin:!1},component:()=>Promise.resolve().then(a.bind(a,7214))},{path:"/fav",name:"fav",component:I["default"],meta:{isLogin:!1},component:()=>Promise.resolve().then(a.bind(a,3228))},{path:"/historylist",name:"historylist",component:N["default"],meta:{isLogin:!1},component:()=>Promise.resolve().then(a.bind(a,9193))}],D=new k.ZP({base:"/",routes:q});var O=D,j=a(4239),T=a(70),J=a(5428),z=a.n(J);m.ZP.use(z()),m.ZP.use(p.Z),m.ZP.use(h.Z),m.ZP.use(d.Z),m.ZP.use(c.Z),m.ZP.use(l.Z),m.ZP.use(r.Z),m.ZP.use(n.Z),m.ZP.use(o.Z),m.ZP.use(i.Z),m.ZP.use(s.Z),m.ZP.prototype.$axios=T.ZP,m.ZP.config.productionTip=!1,new m.ZP({router:O,store:j.Z,render:t=>t(y),beforeCreate(){m.ZP.prototype.$bus=this}}).$mount("#app")},4239:function(t,e,a){var s=a(6369),i=a(3822);s.ZP.use(i.ZP),e["Z"]=new i.ZP.Store({state:{isLogin:!1},mutations:{loginout(t,e){t.userInfo.isLogin=e}}})},5538:function(t,e,a){t.exports=a.p+"img/doge-fire.d1d1c50c.jpg"},6095:function(t,e,a){t.exports=a.p+"img/doge.e44c8e7d.png"}},e={};function a(s){var i=e[s];if(void 0!==i)return i.exports;var o=e[s]={exports:{}};return t[s].call(o.exports,o,o.exports,a),o.exports}a.m=t,function(){var t=[];a.O=function(e,s,i,o){if(!s){var n=1/0;for(d=0;d<t.length;d++){s=t[d][0],i=t[d][1],o=t[d][2];for(var r=!0,l=0;l<s.length;l++)(!1&o||n>=o)&&Object.keys(a.O).every((function(t){return a.O[t](s[l])}))?s.splice(l--,1):(r=!1,o<n&&(n=o));if(r){t.splice(d--,1);var c=i();void 0!==c&&(e=c)}}return e}o=o||0;for(var d=t.length;d>0&&t[d-1][2]>o;d--)t[d]=t[d-1];t[d]=[s,i,o]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,s){var i,o,n=s[0],r=s[1],l=s[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(i in r)a.o(r,i)&&(a.m[i]=r[i]);if(l)var d=l(a)}for(e&&e(s);c<n.length;c++)o=n[c],a.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return a.O(d)},s=self["webpackChunkdemo"]=self["webpackChunkdemo"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(2027)}));s=a.O(s)})();
//# sourceMappingURL=app.41928c7a.js.map